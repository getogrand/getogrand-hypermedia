services:
  app:
    image: 730335367003.dkr.ecr.ap-northeast-2.amazonaws.com/getogrand-hypermedia/app
    build:
      target: prod
      platforms:
        - "linux/x86_64"
    command: sh -c "python manage.py collectstatic --no-input && python manage.py migrate && gunicorn -b 0.0.0.0:8000 --access-logfile '-' getogrand_hypermedia.wsgi"
    restart: unless-stopped
    ports:
      - 8000:8000
  proxy:
    image: 730335367003.dkr.ecr.ap-northeast-2.amazonaws.com/getogrand-hypermedia/proxy
    build:
      platforms:
        - "linux/x86_64"
  db:
    image: 730335367003.dkr.ecr.ap-northeast-2.amazonaws.com/getogrand-hypermedia/db
    build:
      platforms:
        - "linux/x86_64"
